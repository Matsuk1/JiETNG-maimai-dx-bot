# フレンドシステム

JiETNG のフレンドシステムを使用して、他の maimai DX プレイヤーと繋がり、スコアを比較し、ランキングで競い合いましょう。

## 概要

フレンドシステムでできること：
- 👥 他の JiETNG ユーザーをフレンドとして追加
- 🏆 フレンドのスコアを表示
- 🤝 自分の maimai コミュニティを構築

:::warning 連携が必要
フレンド機能を使用するには、[SEGA ID を連携](/ja/guide/binding)する必要があります。
:::

## フレンドリスト

### フレンドリストを表示

**コマンド：**

```
friend list
friendlist
フレンドリスト
```

**表示内容：**
- すべてのフレンドのリスト
- ユーザー名またはニックネーム
- 現在のレーティング

:::tip リストが空ですか？
フレンドリストが空の場合、まだフレンドを追加していません！以下の「フレンドを追加」セクションを参照してください。
:::

## フレンドを追加

JiETNG では、複数の方法でフレンドを追加できます。

### 方法 1：直接フレンドリクエスト

**コマンド形式：**

```
add-friend [user_id]
friend request [user_id]
フレンド申請 [user_id]
```

**例：**

```
add-friend U1234567890abcdef
friend request U9876543210fedcba
```

相手にフレンドリクエストの通知が送られます。

:::tip ユーザー ID の見つけ方
ユーザー ID は LINE アカウントの一意の識別子で、以下の方法で取得できます：
- フレンドに直接尋ねる
- フレンドの QR コードをスキャン（方法 2 を参照）
:::

### 方法 2：QR コード共有

JiETNG はフレンド招待リンクを含む QR コードを生成できます。

**手順：**

1. ユーザー A がフレンド QR コードを生成（コマンドまたは Web インターフェース経由）
2. ユーザー B がスマートフォンのカメラまたは LINE で QR コードをスキャン
3. QR コードには以下のリンクが含まれています：
   ```
   https://[domain]/linebot/add_friend?id=[user_id]
   ```
4. ユーザー B がそのリンクまたは QR 画像をボットに送信
5. フレンドリクエストが自動的に送信されます！

:::tip QR コードの利点
- ID を手動で入力する必要なし
- オフラインでの追加が可能（例：ゲームセンターで）
- コミュニティで共有可能
- ID をコピーするより便利
:::

## フレンドリクエストの管理

### 保留中のリクエストを表示

フレンドリクエストを受け取ると通知が届きます。以下のコマンドで確認できます：

```
friend requests
pending requests
```

### フレンドリクエストを承認

**コマンド形式：**

```
accept-request [request_id]
```

**例：**

```
accept-request req_123456789
```

:::tip Request ID について
Request ID はフレンドリクエスト通知に表示され、ユーザー ID とは異なり、そのリクエスト固有の識別子です。
:::

### フレンドリクエストを拒否

**コマンド形式：**

```
reject-request [request_id]
```

**例：**

```
reject-request req_123456789
```

送信者にはリクエストを拒否したことは通知されません。

:::warning 注意
リクエストを承認または拒否すると、操作は取り消せません。再度フレンドを追加したい場合は、相手が再度リクエストを送信する必要があります。
:::

## スコアを比較

### フレンドのスコアを表示

フレンドのスコアを表示して、自分のスコアと比較できます。

**コマンド形式：**

```
friend-b50 [friend_code]
```

**例：**

```
friend-b50 ABC123
```

:::warning プライバシーについて
- 互いにフレンドになっているユーザーのみ有効
- 双方が SEGA ID を連携している必要があります
:::


### プライバシーとセキュリティ

- ✅ すべてのフレンドリクエストには明示的な同意が必要
- ✅ 自動フレンド追加はありません
- ✅ リクエストを拒否しても相手に通知されません

### 制限事項

- **リクエストの有効期限**：古いリクエストは一定期間後に無効になる可能性があります
- **リクエスト頻度制限**：フレンドリクエストのスパムを防止
- **連携要件**：双方がアカウントを連携している必要があります

## トラブルシューティング

### 「ユーザーが見つかりません」

**問題：** フレンドリクエストを送信できない。

**考えられる原因：**
- ユーザー ID が間違っている
- 相手が SEGA ID を連携していない
- 相手が JiETNG を使用していない
- ID のスペルミス

**解決策：**
- ID が正しいか確認
- 相手に `get me` で連携状態を確認してもらう
- QR コードで追加を試す
- 完全な ID をコピーしたか確認

---

### 「すでにリクエストを送信済み」

**問題：** すでにリクエストを送信しており、再度送信できない。

**原因：** 相手がまだ前回のリクエストを処理していない。

**解決策：**
- 相手が承認または拒否するまで待つ
- 相手にリクエストの処理を促す
- 有効期限が切れたら再送信可能

---


### 追加後にフレンドリストが空

**問題：** リクエストを承認したがフレンドが表示されない。

**考えられる原因：**
- リクエストが期限切れになった
- 承認時にシステムエラーが発生
- キャッシュがまだ更新されていない

**解決策：**
- リストを再確認
- 双方で `friend list` を実行
- 再度追加を試す
- 問題が続く場合は、[GitHub Issues](https://github.com/Matsuk1/JiETNG/issues) で報告

## 使用のヒント

### フレンド体験を向上させるコツ

1. **定期的にスコアを更新**：`maimai update` でフレンドに最新のスコアを見せる
2. **分かりやすいニックネームを使用**：フレンドがあなたを識別しやすくする
3. **非アクティブなフレンドを整理**：リストをきれいに保つ
4. **コミュニティに参加**：Discord や交流グループに参加
5. **QR コードを使用**：ゲームセンターで素早くフレンド追加

### フレンドネットワークを構築する方法

- **オフラインゲームセンター**：よく一緒にプレイするプレイヤーと交流
- **オンラインコミュニティ**：maimai フォーラムや Discord グループに参加
- **ソーシャルメディア**：Twitter や掲示板でフレンドコードを共有
- **大会イベント**：参加者と交流して知り合いになる
- **スコア共有**：B50 を投稿して #maimai タグを付ける

## フレンドコマンド早見表

| コマンド | 機能 |
|------|------|
| `friend list` | フレンドリストを表示 |
| `add-friend [id]` | フレンドリクエストを送信 |
| `accept-request [req_id]` | リクエストを承認 |
| `reject-request [req_id]` | リクエストを拒否 |
| `friend-b50 [code]` | フレンドの Best 50 を表示 |

## 使用例

### ゲームセンターでフレンドを追加

1. プレイ中のプレイヤーに出会う
2. 相手がスマートフォンで QR コードを表示
3. あなたがスマートフォンで QR コードをスキャン
4. 生成されたリンクを JiETNG ボットに送信
5. システムが自動的にフレンドリクエストを送信
6. 相手が後で承認
7. これでお互いの B50 を見ることができます！

### スコア比較

```
# 自分の B50 を表示
b50

# フレンドのスコアを表示
friend-b50 XYZ789

# フレンドリストを表示
friend list
```

## 今後の予定機能

将来追加される可能性のあるフレンドシステム機能：

- フレンドランキング
- フレンドアクティビティフィード
- 特定の楽曲のスコア比較
- フレンドチャレンジシステム
- フレンドグループ / チーム

最新情報は [GitHub プロジェクトページ](https://github.com/Matsuk1/JiETNG) をご確認ください。

## 次のステップ

- [アカウント連携ガイド](/ja/guide/binding) — フレンド機能の前提条件
- [サポートページ](/ja/more/support) — 問題を報告
- [FAQ よくある質問](/ja/more/faq)

---

**クイックスタート：**

```bash
# 1. フレンドを追加
add-friend U1234567890abcdef

# 2. フレンドリクエストを承認
accept-request req_123456789

# 3. フレンドを表示
friend list

# 4. フレンドのスコアを表示
friend-b50 ABC123
```
