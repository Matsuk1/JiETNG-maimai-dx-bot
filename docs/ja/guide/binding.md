# アカウント連携

SEGA IDをJiETNGに連携して、maimai DXのスコアやレコードにアクセスする方法を学びましょう。

## 連携の仕組み

JiETNGは**Webベースの連携**を使用し、安全な期限付きトークンを使用します。認証情報は安全なWebフォームから送信され、チャットには入力しません。

:::warning 重要
コマンドラインでの連携はありません。認証情報をチャットに直接入力することはできません。すべての連携は安全なWebインターフェースを通じて行われます。
:::

## アカウントを連携する

### ステップ1: 連携プロセスを開始

ボットに以下のいずれかのコマンドを送信します：

- `bind`
- `segaid bind`
- `バインド`

### ステップ2: 連携URLを開く

ボットから固有のURLを含むボタンが送信されます：

```
SEGA アカウント連携
SEGA アカウントと連携されます
有効期限は発行から2分間です

[押しで連携] ← このボタンをクリック
```

:::tip トークンの有効期限
連携トークンは**2分後**に期限切れになります。期限切れの場合は、`bind`コマンドを再度送信して新しいトークンを取得してください。
:::

### ステップ3: 認証情報を入力

Webフォームで以下を入力します：

- **言語**: 希望する言語を選択
- **SEGA ID**: SEGAアカウントのユーザー名
- **パスワード**: SEGAアカウントのパスワード
- **バージョン**: `jp`（日本）または `intl`（国際版）を選択

:::danger セキュリティに関する注意
- SEGA認証情報を誰とも共有しないでください
- ボットはパスワードを平文で保存しません
- ボットが提供する公式の連携URLのみを使用してください
:::

### ステップ4: 確認

連携が成功すると、確認メッセージが表示され、すべての機能を使用できるようになります。

## 連携状態の確認

アカウントが連携されているか確認するには：

```
get me
```

または

```
getme
ゲットミー
```

これにより、以下を含む現在の連携情報が表示されます：
- SEGA ID
- バージョン（jp/intl）
- 言語設定
- 個人情報ステータス

## アカウント連携の解除

ボットからSEGA IDを削除するには：

```
unbind
```

または

```
アンバインド
```

:::warning データの削除
連携を解除すると、以下を含むすべての保存データが**永久に削除**されます：
- SEGA認証情報
- スコアレコード
- フレンドリスト
- 個人情報
- 言語設定

この操作は元に戻せません。
:::

## トラブルシューティング

### トークン期限切れエラー

**問題**: 連携URLに「トークンが期限切れです」または「無効なトークン」と表示される

**解決策**:
- `bind`を再度送信して新しいトークンを生成
- 2分以内に連携を完了
- 最新のURLを使用していることを確認

### 無効な認証情報

**問題**: 「ログインに失敗しました」または「無効なSEGA ID/パスワード」

**解決策**:
- SEGA IDとパスワードを再確認
- 正しいバージョン（jp vs intl）を使用していることを確認
- [maimai NET](https://maimaidx.jp/maimai-mobile/)に直接ログインして認証情報を確認
- 国際版の場合は[maimai NET DX International](https://maimaidx-eng.com/maimai-mobile/)を使用

### すでに連携済みエラー

**問題**: 「このSEGA IDはすでに別のアカウントに連携されています」

**解決策**:
- 各SEGA IDは一度に1つのLINEアカウントにのみ連携できます
- 再連携が必要な場合は、まず以前のアカウントから`unbind`してください
- 以前のアカウントにアクセスできない場合は、サポートにお問い合わせください

### Webフォームが読み込まれない

**問題**: 連携URLが開かないかエラーが表示される

**解決策**:
- インターネット接続を確認
- 別のブラウザで開いてみる
- ブラウザのキャッシュとCookieをクリア
- 問題が続く場合は、[GitHub Issues](https://github.com/Matsuk1/JiETNG/issues)で報告

## バージョンの選択

### 日本（jp）

日本のアーケード筐体でプレイしている場合に使用：
- 日本の公式maimai DX
- スタンダードとDX譜面
- すべての日本限定楽曲
- URL: https://maimaidx.jp/maimai-mobile/

### 国際版（intl）

日本国外でプレイしている場合に使用：
- 他の国のmaimai DX筐体
- JPに比べて楽曲アップデートが遅延する可能性あり
- 地域別イベント
- URL: https://maimaidx-eng.com/maimai-mobile/

:::tip 正しいバージョンの選択
物理的にmaimai DXをプレイする場所に合ったバージョンを選択してください。連携を解除して再連携しない限り、アカウントのバージョンは変更できません。
:::

## セキュリティのベストプラクティス

### アカウントを保護する

1. **連携URLを共有しない**: 各トークンはあなた専用で、2分で期限切れになります
2. **強力なパスワードを使用**: SEGAアカウント用
3. **ドメインを確認**: 連携URLが公式JiETNGドメインからのものであることを確認
4. **使用後はログアウト**: 共有デバイスの場合
5. **不審なアクティビティを報告**: 不正アクセスに気付いた場合

## 連携後の機能

連携すると、以下が可能になります：

✅ Best 50チャートの生成
✅ 楽曲レコードの確認
✅ プレート進捗の追跡
✅ 楽曲検索
✅ maimai NETからのスコア更新
✅ フレンドの追加とフレンドランキングの表示
✅ maimaiパスカードの生成
✅ 近くの店舗を検索

## 自動スコア更新

連携後、手動でスコアを更新できます：

```
maimai update
```

または

```
update
アップデート
```

これにより、maimai NETから最新のスコアを取得し、ボット内のレコードを更新します。

:::tip 更新頻度
スコア更新はキューに入れられ、SEGAサーバーへの過負荷を避けるため順次処理されます。ピーク時には、更新に数分かかる場合があります。
:::

## 複数デバイス

- 連携はデバイスではなく、LINEアカウントに紐付けられます
- ログインしているデバイスであれば、どこでもボットを使用できます
- デバイスを変更しても再連携は不要です
- LINEアカウントを変更した場合は、再度連携が必要です

## サポートが必要ですか？

- [FAQ](/ja/more/faq)で一般的な質問を確認
- [GitHub](https://github.com/Matsuk1/JiETNG/issues)で問題を報告
- [サポートページ](/ja/more/support)からサポートに連絡

---

**次のステップ:**
- [入門ガイド](/ja/guide/getting-started) - 基本的な使い方
- [コマンドリファレンス](/ja/commands/basic) - 利用可能なコマンド
