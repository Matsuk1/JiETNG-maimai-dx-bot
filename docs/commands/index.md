# JiETNG 命令完整列表

本文档列出了 JiETNG LINE Bot 的所有可用命令。

---

## 目录

- [基础命令](#基础命令)
- [账户管理](#账户管理)
- [成绩查询](#成绩查询)
- [歌曲查询](#歌曲查询)
- [版本达成](#版本达成)
- [好友功能](#好友功能)
- [工具命令](#工具命令)
- [管理员命令](#管理员命令)

---

## 基础命令

### 支持功能

| 命令 | 别名 | 说明 |
|------|------|------|
| `donate` | `ドネーション` | 显示捐赠支持信息，支持 JiETNG 的开发与未来 |

---

## 账户管理

### 绑定与查看

| 命令 | 别名 | 说明 |
|------|------|------|
| `bind` | `segaid bind`, `バインド` | 绑定 SEGA 账户 |
| `get me` | `getme`, `ゲットミー` | 查看当前账户绑定信息 |
| `unbind` | `アンバインド` | 解除账户绑定 |

### 数据更新

| 命令 | 别名 | 说明 |
|------|------|------|
| `maimai update` | `update`, `record update`, `マイマイアップデート`, `レコードアップデート`, `アップデート` | 从 maimai NET 同步最新成绩数据 |

**说明**：
- 数据更新命令需要先绑定 SEGA 账户
- 更新过程可能需要 1-2 分钟
- 频率限制：30 秒内最多 2 次请求

---

## 成绩查询

### 标准成绩图

| 命令 | 别名 | 说明 |
|------|------|------|
| `b50` | `best50`, `best 50`, `ベスト50` | Best 35 (旧版本) + Best 15 (新版本) |
| `b100` | `best100`, `best 100`, `ベスト100` | Best 70 (旧版本) + Best 30 (新版本) |
| `b35` | `best35`, `best 35`, `ベスト35` | 仅显示旧版本 Best 35 |
| `b15` | `best15`, `best 15`, `ベスト15` | 仅显示新版本 Best 15 |

### 特殊成绩图

| 命令 | 别名 | 说明 |
|------|------|------|
| `ab35` | `allb35`, `all best 35`, `オールベスト35` | 所有版本混合的 Best 35 |
| `ab50` | `allb50`, `all best 50`, `オールベスト50` | 所有版本混合的 Best 50 |
| `ab100` | `allb100`, `all best 100`, `オールベスト100` | 所有版本混合的 Best 100 |
| `ab200` | `allb200`, `all best 200`, `オールベスト200` | 所有版本混合的 Best 200 |
| `ap50` | `apb50`, `all perfect 50`, `オールパーフェクト50` | 仅显示 AP/APP 的 Best 50 |
| `rct50` | `r50`, `recent50`, `recent 50` | 最近 50 条游玩记录 |
| `idealb50` | `idlb50`, `ideal best 50`, `理想的ベスト50` | 理想分数 Best 50（自动提升至下一等级） |
| `unknown` | `unknown songs`, `unknown data`, `未発見` | 未识别的歌曲成绩 |

### 高级筛选参数

所有成绩图命令都支持以下筛选参数：

| 参数 | 说明 | 示例 |
|------|------|------|
| `-lv [min] [max]` | 按定数范围筛选（max 可省略，默认无上限） | `b50 -lv 13.2 13.8` 或 `b50 -lv 13.2` |
| `-ra [min] [max]` | 按 Rating 范围筛选（max 可省略，默认无上限） | `b50 -ra 301 312` 或 `b50 -ra 301` |
| `-scr [min] [max]` | 按达成率筛选（max 可省略，默认无上限） | `b50 -scr 100.3 100.8` 或 `b50 -scr 100.3` |
| `-dx [min] [max]` | 按 DX 分数百分比筛选（max 可省略，默认无上限） | `b50 -dx 92 95` 或 `b50 -dx 92` |

**注意**：所有筛选参数均支持单参数模式（仅指定下限，无上限）：
- `-lv 13.2` 表示定数 ≥13.2（无上限）
- `-ra 301` 表示 Rating ≥301（无上限）
- `-scr 100.3` 表示达成率 ≥100.3%（无上限）
- `-dx 92` 表示 DX 分数 ≥92%（无上限）

#### 筛选参数组合示例

```
b50 -lv 13.2 13.8                    # 定数 13.2-13.8 的 B50
b50 -lv 13.2                         # 定数 ≥13.2 的 B50（无上限）
b50 -ra 301 312                      # Rating 301-312 的 B50
b50 -ra 301                          # Rating ≥301 的 B50（无上限）
b50 -scr 100.3 100.8                 # 达成率 100.3%-100.8% 的 B50
b50 -scr 100.3                       # 达成率 ≥100.3% 的 B50（无上限）
b50 -dx 92 95                        # DX 分数 92%-95% 的 B50
b50 -dx 92                           # DX 分数 ≥92% 的 B50（无上限）
b50 -lv 13.2 13.8 -scr 100.0         # 定数 13.2-13.8 且达成率 ≥100% 的 B50
b100 -lv 13.0 14.9 -dx 92 95         # 定数 13.0-14.9 且 DX 92%-95% 的 B100
idealb50 -lv 13.5 14.0               # 定数 13.5-14.0 的理论分 B50
```

### Yang Rating（过去版本 Rating）

| 命令 | 别名 | 说明 |
|------|------|------|
| `yang` | `yrating`, `yra`, `ヤンレーティング` | 生成 Yang Rating 图（按版本统计） |

---

## 歌曲查询

### 歌曲信息

| 命令格式 | 别名 | 说明 | 示例 |
|---------|------|------|------|
| `[曲名]ってどんな曲` | `[曲名]info`, `[曲名]song-info` | 查询歌曲详细信息 | `ヒバナってどんな曲` |
| `[曲名]のレコード` | `[曲名]record`, `[曲名]song-record` | 查看个人在该曲的成绩 | `ヒバナのレコード` |

### 等级成绩列表 & 定数列表

| 命令格式 | 别名 | 说明 | 示例 |
|---------|------|------|------|
| `[等级]のレコードリスト` | `[等级]record-list`, `[等级]records` | 查看指定等级的所有成绩 | `13のレコードリスト` |
| `[定数]のレコードリスト` | `[定数]record-list`, `[定数]records` | 查看指定定数的所有成绩 | `14.5のレコードリスト` |
| `[等级]のレコードリスト [页码]` | `[等级]record-list [页码]`, `[等级]records [页码]` | 查看指定等级的成绩（第N页） | `13のレコードリスト 2` |

**说明**：
- **等级列表**：输入整数（1-15）查看该等级下所有谱面
  - 示例：`13のレコードリスト` - 查看所有 Lv.13 谱面的成绩
- **定数列表**：输入小数查看指定定数的所有谱面
  - 示例：`14.5のレコードリスト` - 查看所有定数 14.5 的谱面成绩
  - 示例：`13.7のレコードリスト` - 查看所有定数 13.7 的谱面成绩
- 每页最多显示 20 条记录，可通过页码参数翻页
- 自动按 Rating 降序排列

---

## 版本达成

### 牌子达成情况

**命令格式**：`[版本姓名框]の達成状況`

**别名**：可以使用 `achievement-list` 或 `achievement` 替代 `の達成状況`

| 牌子类型 | 命令示例 | 说明 |
|---------|---------|------|
| 極（极） | `宴極の達成状況` | 查看"宴極"牌达成情况 |
| 将（将） | `双将の達成状況` | 查看"双将"牌达成情况 |
| 神（神） | `鏡神の達成状況` | 查看"鏡神"牌达成情况 |
| 舞舞（舞舞） | `彩舞舞の達成状況` | 查看"彩舞舞"牌达成情况 |

**更多示例**：
```
宴極の達成状況                # 宴 极
双将の達成状況                # 双 将
鏡神の達成状況                # 鏡 神
彩舞舞の達成状況              # 彩 舞舞
真極の達成状況                # 真 极
真将の達成状況                # 真 将
真神の達成状況                # 真 神
真舞舞の達成状況              # 真 舞舞
```

**英文别名示例**：
```
宴極achievement-list            # 等同于 宴極の達成状況
双将achievement                 # 等同于 双将の達成状況
```

### 版本歌曲列表

| 命令格式 | 别名 | 说明 | 示例 |
|---------|------|------|------|
| `[版本名]のバージョンリスト` | `[版本名]version-list`, `[版本名]version` | 查看该版本的所有歌曲 | `PRiSM PLUSのバージョンリスト` |

**版本名示例**：
```
PRiSM PLUSのバージョンリスト
FESTiVAL PLUSのバージョンリスト
BUDDiESのバージョンリスト
UNiVERSEのバージョンリスト
```

---

## 好友功能

### 好友管理

| 命令 | 别名 | 说明 |
|------|------|------|
| `friend list` | `friendlist`, `フレンドリスト` | 查看已添加的好友列表 |
| `add-friend [好友代码]` | `フレンド申請 [好友代码]`, `friend request [好友代码]` | 发送好友申请 |
| `friend-b50 [好友代码]` | `friend b50 [好友代码]`, `フレンドb50 [好友代码]` | 查看好友的 B50 成绩 |

**示例**：
```
friend list                   # 查看好友列表
add-friend 1234567890123456   # 发送好友申请
friend-b50 1234567890123456   # 查看好友 B50
```

**说明**：
- 好友代码为 16 位数字
- 需要先绑定 SEGA 账户才能使用好友功能
- 使用**好友申请系统**：发送申请后，对方收到通知并可选择接受/拒绝
- 如果双方都发送了申请，系统将自动通过
- 好友数据会自动缓存，减少网络请求

---

## 工具命令

### Rating 计算

| 命令 | 说明 | 示例 |
|------|------|------|
| `rc [定数]` | 查看指定定数的 Rating 对照表 | `rc 13.2` |
| `RC [定数]` | Rating 对照表（大写） | `RC 13.2` |
| `Rc [定数]` | Rating 对照表（首字母大写） | `Rc 13.2` |

### 分数计算

| 命令 | 说明 | 示例 |
|------|------|------|
| `calc [tap] [hold] [slide] [break]` | 计算 4 键分数（无 touch） | `calc 500 100 200 50` |
| `calc [tap] [hold] [slide] [touch] [break]` | 计算 5 键分数（含 touch） | `calc 500 100 200 50 50` |

**说明**：
- 计算器会显示各类失误（Great/Good/Miss）对应的达成率
- 支持 4 参数（无 touch）和 5 参数（含 touch）两种格式

### 随机选曲

| 命令 | 说明 | 示例 |
|------|------|------|
| `ランダム曲` | 随机选择一首歌曲 | `ランダム曲` |
| `ランダム` | 随机选择一首歌曲（简写） | `ランダム` |
| `random-song` | 随机选择一首歌曲（英文） | `random-song` |
| `random` | 随机选择一首歌曲（英文简写） | `random` |

### 名片生成

| 命令 | 别名 | 说明 |
|------|------|------|
| `maid card` | `maid`, `mai pass`, `maipass`, `マイパス`, `マイカード` | 生成 maimai 通行证名片 |

### 图片识别

| 功能 | 说明 |
|------|------|
| 发送图片（二维码） | 自动扫描图片中的二维码，识别好友添加链接或其他数据 |
| 发送图片（封面识别） | 识别图片中的歌曲封面，自动返回歌曲信息和个人成绩 |

**二维码识别说明**：
- 将好友的名片截图发送给 Bot，可自动识别好友添加链接
- 支持扫描任何包含二维码的图片

**封面识别说明**：
- 发送包含歌曲封面的图片（游戏截图、宣传图等）
- Bot 会自动识别图片中的封面并返回对应的歌曲信息
- 采用混合识别策略：
  - **哈希匹配**：快速识别完整封面（准确率高）
  - **SIFT 特征点匹配**：识别场景图片中的部分封面（召回率高）
- 支持一图多曲识别（最多返回 5 首）
- 识别率：完整封面接近 100%，部分遮挡视情况而定

### 位置服务

| 功能 | 说明 |
|------|------|
| 发送位置 | 查找附近的 maimai 游戏厅（最多显示 4 家） |

**说明**：
- 在 LINE 中点击"+"按钮，选择"位置"
- 发送当前位置或任意位置
- Bot 会返回附近的 maimai 游戏厅信息（名称、地址、距离、地图链接）

---

## 管理员命令

**注意**：以下命令仅管理员可用

| 命令 | 说明 |
|------|------|
| `upload notice [内容]` | 上传新公告，所有用户的公告已读状态将被重置 |
| `dxdata update` | 手动更新 dxdata 数据库，并对比变化 |

---

## 快速参考

### 常用命令

```
donate                     # 查看捐赠支持方式
bind                       # 绑定 SEGA 账户
update                     # 更新成绩数据
b50                        # 查看 B50
ヒバナってどんな曲          # 查看歌曲信息
ヒバナのレコード            # 查看个人成绩
宴極の達成状況             # 查看宴极达成
friend list                # 好友列表
maid card                  # 生成名片
```

### 筛选示例

```
b50 -lv 13.2 13.8          # 定数 13.2-13.8
b50 -lv 13.2               # 定数 ≥13.2（无上限）
b50 -ra 301 312            # Rating 301-312
b50 -ra 301                # Rating ≥301（无上限）
b50 -scr 100.3 100.8       # 达成率 100.3%-100.8%
b50 -scr 100.3             # 达成率 ≥100.3%（无上限）
b50 -dx 92 95              # DX 分数 92%-95%
b50 -dx 92                 # DX 分数 ≥92%（无上限）
```

---

**更新日期**：2025-10-27
**版本**：基于 main.py 分析生成
