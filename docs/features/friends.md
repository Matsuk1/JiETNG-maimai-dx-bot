# 好友系统（Friend System）

通过 JiETNG 的好友系统，你可以与其他 maimai DX 玩家连接、比较分数，并在排行榜中一较高下。

## 概览

好友系统可以让你：
- 👥 添加其他 JiETNG 用户为好友  
- 🏆 查看好友的分数  
- 🤝 建立属于你的 maimai 社区  

:::warning 需要绑定
使用好友功能前必须 [绑定 SEGA ID](/guide/binding)。
:::

## 好友列表

### 查看好友列表

**命令：**

```
friend list  
friendlist  
フレンドリスト
```

**显示内容：**
- 所有好友的列表  
- 他们的用户名或昵称 
- 当前 Rating

:::tip 列表为空？
如果你的好友列表是空的，说明你还没有添加好友！请参阅下方“添加好友”部分。
:::

## 添加好友

在 JiETNG 中，有多种方式可以添加好友。

### 方法一：直接好友请求

**命令格式：**

```
add-friend [user_id]  
friend request [user_id]  
フレンド申請 [user_id]
```

**示例：**

```
add-friend U1234567890abcdef  
friend request U9876543210fedcba
```

对方会收到好友请求通知。

:::tip 如何找到用户 ID
用户 ID 是 LINE 账户的唯一标识，可通过以下方式获得：
- 直接向好友询问  
- 扫描好友的 QR 码（见方法二）
:::

### 方法二：QR 码分享

JiETNG 可以生成包含好友邀请链接的 QR 码。

**流程说明：**

1. 用户 A 生成好友 QR 码（通过命令或网页界面）  
2. 用户 B 用手机相机或 LINE 扫描该 QR 码  
3. 该 QR 码包含如下链接：  
   ```
   https://[domain]/linebot/add_friend?id=[user_id]
   ```
4. 用户 B 将该链接或 QR 图片发送给机器人  
5. 好友请求会自动发送！

:::tip QR 码的好处
- 无需手动输入 ID  
- 可线下互加（例如在街机厅）  
- 可在社区中分享  
- 比复制 ID 更方便  
:::

## 管理好友请求

### 查看待处理请求

当你收到好友请求时，会收到通知。可使用以下命令查看：

```
friend requests  
pending requests
```

### 接受好友请求

**命令格式：**

```
accept-request [request_id]
```

**示例：**

```
accept-request req_123456789
```

:::tip 关于 Request ID
Request ID 会显示在好友请求通知中，它不同于用户 ID，是该请求的唯一标识符。
:::

### 拒绝好友请求

**命令格式：**

```
reject-request [request_id]
```

**示例：**

```
reject-request req_123456789
```

发送方不会被告知你拒绝了请求。

:::warning 注意
一旦接受或拒绝请求，操作不可撤销。若想重新添加该好友，对方需再次发送请求。
:::

## 比较分数

### 以好友的身份查看成绩

可以好友的身份查看成绩，与自己进行比较。

**命令格式：**

```
friend-b50 [friend_code]  
```

**示例：**

```
friend-b50 ABC123
```

:::warning 隐私说明
- 仅对与你互加好友的用户有效  
- 双方都需已绑定 SEGA ID  
:::


### 隐私与安全

- ✅ 所有好友请求都需明确同意  
- ✅ 不存在自动加好友  
- ✅ 拒绝请求不会通知对方  

### 限制条件

- **请求过期时间**：旧请求可能在一定时间后失效  
- **请求频率限制**：防止滥发好友请求  
- **绑定要求**：双方都需已绑定账号  

## 故障排查

### “查无此人”

**问题：** 无法发送好友请求。

**可能原因：**
- 用户 ID 错误  
- 对方未绑定 SEGA ID  
- 对方未使用 JiETNG  
- ID 拼写错误  

**解决方案：**
- 检查 ID 是否正确  
- 让对方用 `get me` 验证绑定状态  
- 改用 QR 码添加  
- 确保复制完整 ID  

---

### “已经发送过请求”

**问题：** 已经发送过请求，无法再次发送。

**原因：** 对方尚未处理上一次请求。

**解决方案：**
- 等待对方接受或拒绝  
- 可提醒对方处理请求  
- 过期后可重新发送  

---


### 添加后好友列表为空

**问题：** 已接受请求但好友未显示。

**可能原因：**
- 请求已过期  
- 系统接受时出现错误  
- 缓存尚未刷新  

**解决方案：**
- 重新查看列表  
- 双方都执行 `friend list`  
- 尝试重新添加  
- 若仍异常，请在 [GitHub Issues](https://github.com/Matsuk1/JiETNG/issues) 报告  

## 使用建议

### 提升好友体验的技巧

1. **定期更新分数**：使用 `maimai update` 让好友看到最新成绩  
2. **使用清晰昵称**：方便好友识别你  
3. **清理不活跃好友**：保持列表干净  
4. **参与社区**：加入 Discord 或交流群  
5. **使用 QR 码**：在街机厅快速加好友  

### 建立好友网络的方法

- **线下街机厅**：与常玩的玩家互加  
- **线上社区**：加入 maimai 论坛、Discord 群等  
- **社交媒体**：在 Twitter 或贴吧分享好友码  
- **比赛活动**：与参赛者交流结识  
- **分数分享**：发布你的 B50 并打上 #maimai 标签  

## 好友命令速查表

| 命令 | 作用 |
|------|------|
| `friend list` | 查看好友列表 |
| `add-friend [id]` | 发送好友请求 |
| `accept-request [req_id]` | 接受请求 |
| `reject-request [req_id]` | 拒绝请求 |
| `friend-b50 [code]` | 查看好友 Best 50 |

## 使用示例

### 在街机厅加好友

1. 你遇到一位正在玩的玩家  
2. 他展示手机中的 QR 码  
3. 你用手机扫描该 QR 码  
4. 将生成的链接发送给 JiETNG 机器人  
5. 系统自动发送好友请求  
6. 对方稍后接受  
7. 现在你们可以互看 B50 了！

### 分数比较

```
# 查看自己的 B50
b50

# 以好友的身份查看成绩
friend-b50 XYZ789

# 查看好友列表
friend list
```

## 未来计划功能

未来可能加入的好友系统功能：

- 好友排行榜  
- 好友活动动态  
- 针对特定歌曲的分数对比  
- 好友挑战系统  
- 好友小组 / 队伍  

请关注 [GitHub 项目页](https://github.com/Matsuk1/JiETNG) 获取最新进展。

## 下一步

- [账户绑定指南](/guide/binding) — 使用好友功能的前提  
- [支持页面](/more/support) — 报告问题  
- [FAQ 常见问题](/more/faq)

---

**快速上手：**

```bash
# 1. 添加好友
add-friend U1234567890abcdef

# 2. 接受好友请求
accept-request req_123456789

# 3. 查看好友
friend list

# 4. 以好友的身份查看成绩
friend-b50 ABC123
```
