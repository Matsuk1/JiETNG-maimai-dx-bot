<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title id="page-title">SEGA アカウント連携 | JiETNG</title>
  {% include 'common_styles.html' %}

  <style>
    /* 页面特定 CSS 变量 - Page-specific CSS Variables */
    :root {
      --card-bg: rgba(102, 0, 51, 0.04);
      --card-border: rgba(153, 0, 0, 0.15);
      --card-glow: rgba(129, 0, 32, 0.08);
      --input-bg: rgba(0, 0, 0, 0.03);
      --input-border: rgba(153, 0, 0, 0.2);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --card-bg: rgba(102, 0, 51, 0.08);
        --card-border: rgba(153, 0, 0, 0.2);
        --card-glow: rgba(129, 0, 32, 0.15);
        --input-bg: rgba(255, 255, 255, 0.03);
        --input-border: rgba(153, 0, 0, 0.4);
      }
    }

    /* 页面特定样式 - Page-specific Styles */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      /* safe-area padding 已在 :root 上，这里只加额外的 20px */
      /* padding: 20px; */
      position: relative;
      overflow-x: hidden;
      overflow-y: auto;
    }

    /* 页面特定样式 - Page-specific Styles */
    .container {
      width: 100%;
      max-width: 500px;
      background: linear-gradient(135deg,
        rgba(102, 0, 51, 0.12) 0%,
        rgba(153, 0, 0, 0.08) 50%,
        rgba(129, 0, 32, 0.1) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--card-border);
      border-radius: 24px;
      padding: 50px 40px;
      box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.5),
        0 0 60px var(--card-glow),
        inset 0 0 80px rgba(153, 0, 0, 0.02);
      position: relative;
      z-index: 1;
      animation: fadeInScale 0.8s ease;
    }

    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    h2 {
      text-align: center;
      font-size: 32px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent-color), var(--text-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 40px;
      animation: glow 3s ease-in-out infinite;
    }

    @keyframes glow {
      0%, 100% {
        filter: drop-shadow(0 0 10px var(--accent-glow));
      }
      50% {
        filter: drop-shadow(0 0 20px var(--accent-glow));
      }
    }

    label {
      display: block;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-color);
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      opacity: 0.9;
    }

    input[type="text"],
    input[type="password"],
    select {
      width: 100%;
      padding: 16px 20px;
      background: var(--input-bg);
      border: 2px solid var(--input-border);
      border-radius: 12px;
      font-size: 16px;
      color: var(--text-color);
      transition: all 0.3s;
      font-family: inherit;
      margin-bottom: 24px;
    }

    input[type="text"]:focus,
    input[type="password"]:focus,
    select:focus {
      outline: none;
      border-color: var(--accent-color);
      background: rgba(255, 255, 255, 0.1);
      box-shadow: 0 0 20px var(--accent-glow);
      transform: translateY(-2px);
    }

    input[type="text"]::placeholder,
    input[type="password"]::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    select {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23ffffff'><polygon points='0,0 12,0 6,7'/></svg>");
      background-repeat: no-repeat;
      background-position: right 20px center;
      background-size: 12px 12px;
      cursor: pointer;
    }

    input[type="submit"] {
      width: 100%;
      padding: 18px;
      background: linear-gradient(135deg, var(--accent-color), #f59e0b);
      color: #000;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 6px 20px var(--accent-glow);
      position: relative;
      overflow: hidden;
    }

    @media (prefers-color-scheme: light) {
      input[type="submit"] {
        color: #fff;
      }
    }

    input[type="submit"]::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      transition: left 0.5s;
    }

    input[type="submit"]:hover::before {
      left: 100%;
    }

    input[type="submit"]:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px var(--accent-glow);
      filter: brightness(1.1);
    }

    input[type="submit"]:active {
      transform: translateY(0);
    }

    .notice {
      background: rgba(102, 0, 51, 0.06);
      border: 1px solid rgba(153, 0, 0, 0.15);
      border-radius: 16px;
      padding: 24px;
      font-size: 13px;
      color: var(--text-secondary);
      margin-top: 30px;
      line-height: 1.8;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 4px 15px rgba(102, 0, 51, 0.05);
    }

    .notice strong {
      color: var(--accent-color);
      font-size: 14px;
      letter-spacing: 1px;
      display: block;
      margin-bottom: 12px;
    }

    /* 移动端优化 */
    @media (max-width: 600px) {
      body {
        padding: 10px;
      }

      .container {
        padding: 30px 20px;
        max-width: 100%;
      }

      h2 {
        font-size: 24px;
        margin-bottom: 30px;
      }

      input[type="text"],
      input[type="password"],
      select {
        padding: 14px 16px;
        font-size: 15px;
        margin-bottom: 20px;
      }

      input[type="submit"] {
        padding: 16px;
        font-size: 15px;
      }

      .notice {
        padding: 20px;
        font-size: 12px;
      }

      .shape {
        filter: blur(40px);
      }

      .shape1 {
        width: 200px;
        height: 200px;
      }

      .shape2 {
        width: 250px;
        height: 250px;
      }

      .shape3 {
        width: 150px;
        height: 150px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2 id="page-heading">SEGA アカウント連携</h2>
    <form method="POST">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

      <label for="segaid" id="label-segaid">セガID</label>
      <input type="text" id="segaid" name="segaid" required />

      <label for="password" id="label-password">パスワード</label>
      <input type="password" id="password" name="password" required />

      <label for="ver" id="label-version">バージョン</label>
      <select id="ver" name="ver" required>
        <option value="jp" id="opt-jp" selected>日本版「maimaidx.jp」</option>
        <option value="intl" id="opt-intl">海外版「maimaidx-eng.com」</option>
      </select>

      <input type="submit" id="submit-btn" value="連携" />
    </form>

    <div class="notice">
      <strong id="notice-title">ご利用に関するご注意</strong><br>
      <div id="notice-ja" style="display: block;">
        ご入力いただいた情報はすべて暗号化された形式で安全に保存され、第三者に提供されることはありません。<br><br>
        ただし、本サービスは個人によって運営されており、公式な保証やサポートは提供されておりません。本サービスの性質上、セキュリティや運用方針に不安がある場合は、利用をお控えいただくようお願いいたします。情報提供はあくまでご自身の判断と責任にてお願いいたします。
      </div>

      <div id="notice-en" style="display: none;">
        All information you provide will be securely stored in encrypted format and will not be shared with third parties.<br><br>
        However, this service is operated by an individual and does not provide official guarantees or support. Given the nature of this service, if you have concerns about security or operational policies, please refrain from using it. You provide information at your own judgment and responsibility.
      </div>

      <div id="notice-zh" style="display: none;">
        您输入的所有信息都将以加密形式安全保存，不会提供给第三方。<br><br>
        但是，本服务由个人运营，不提供官方保证或支持。鉴于本服务的性质，如果您对安全性或运营政策有顾虑，请勿使用。信息提供完全基于您自己的判断和责任。
      </div>
    </div>
  </div>

  <script>
    const translations = {
      ja: {
        pageTitle: 'SEGA アカウント連携 | JiETNG',
        heading: 'SEGA アカウント連携',
        labelSegaid: 'セガID',
        labelPassword: 'パスワード',
        labelVersion: 'バージョン',
        optJp: '日本版「maimaidx.jp」',
        optIntl: '海外版「maimaidx-eng.com」',
        submitBtn: '連携',
        noticeTitle: 'ご利用に関するご注意'
      },
      en: {
        pageTitle: 'SEGA Account Binding | JiETNG',
        heading: 'SEGA Account Binding',
        labelSegaid: 'SEGA ID',
        labelPassword: 'Password',
        labelVersion: 'Version',
        optJp: 'JP Version「maimaidx.jp」',
        optIntl: 'INTL Version「maimaidx-eng.com」',
        submitBtn: 'Bind',
        noticeTitle: 'Notice'
      },
      zh: {
        pageTitle: 'SEGA 账号绑定 | JiETNG',
        heading: 'SEGA 账号绑定',
        labelSegaid: '世嘉ID',
        labelPassword: '密码',
        labelVersion: '版本',
        optJp: '日本版「maimaidx.jp」',
        optIntl: '国际版「maimaidx-eng.com」',
        submitBtn: '绑定',
        noticeTitle: '使用须知'
      }
    };

    function updateLanguage(lang) {
      const t = translations[lang];

      // Update page title
      document.getElementById('page-title').textContent = t.pageTitle;

      // Update heading
      document.getElementById('page-heading').textContent = t.heading;

      // Update labels
      document.getElementById('label-segaid').textContent = t.labelSegaid;
      document.getElementById('label-password').textContent = t.labelPassword;
      document.getElementById('label-version').textContent = t.labelVersion;

      // Update version options
      document.getElementById('opt-jp').textContent = t.optJp;
      document.getElementById('opt-intl').textContent = t.optIntl;

      // Update submit button
      document.getElementById('submit-btn').value = t.submitBtn;

      // Update notice title
      document.getElementById('notice-title').textContent = t.noticeTitle;

      // Toggle notice content
      document.getElementById('notice-ja').style.display = lang === 'ja' ? 'block' : 'none';
      document.getElementById('notice-en').style.display = lang === 'en' ? 'block' : 'none';
      document.getElementById('notice-zh').style.display = lang === 'zh' ? 'block' : 'none';
    }

    // 页面加载时自动设置用户语言
    window.addEventListener('DOMContentLoaded', function() {
      const userLanguage = '{{ user_language }}' || 'ja';
      updateLanguage(userLanguage);
    });
  </script>
</body>
</html>
