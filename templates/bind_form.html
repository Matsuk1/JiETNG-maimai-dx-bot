<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title id="page-title">SEGA アカウント連携 | JiETNG</title>
  <link rel="icon" type="image/png" href="/static/pics/logo.png">
  {% include 'common_styles.html' %}

  <style>
    /* 页面特定样式 - Page-specific Styles */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      min-height: 100vh;
      background: var(--surface-bg);
    }

    .container {
      width: 100%;
      max-width: 480px;
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      padding: 40px 32px;
      box-shadow: var(--shadow-lg);
    }

    h2 {
      text-align: center;
      font-size: 24px;
      font-weight: 700;
      color: var(--text-color);
      margin-bottom: 32px;
      letter-spacing: -0.5px;
    }

    label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-color);
      margin-bottom: 8px;
    }

    input[type="text"],
    input[type="password"],
    select {
      width: 100%;
      padding: 12px 16px;
      background: var(--surface-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      font-size: 15px;
      color: var(--text-color);
      transition: all var(--transition-base);
      font-family: inherit;
      margin-bottom: 20px;
    }

    input[type="text"]:hover,
    input[type="password"]:hover,
    select:hover {
      border-color: var(--border-hover);
    }

    input[type="text"]:focus,
    input[type="password"]:focus,
    select:focus {
      outline: none;
      border-color: var(--accent-color);
      background: var(--card-bg);
      box-shadow: 0 0 0 3px var(--accent-light);
    }

    input[type="text"]::placeholder,
    input[type="password"]::placeholder {
      color: var(--text-tertiary);
    }

    select {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239CA3AF'><polygon points='0,0 12,0 6,7'/></svg>");
      background-repeat: no-repeat;
      background-position: right 16px center;
      background-size: 12px 12px;
      cursor: pointer;
    }

    @media (prefers-color-scheme: dark) {
      select {
        background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%2394A3B8'><polygon points='0,0 12,0 6,7'/></svg>");
      }
    }

    input[type="submit"] {
      width: 100%;
      padding: 13px;
      background: var(--accent-color);
      color: #ffffff;
      border: none;
      border-radius: var(--radius-md);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-base);
      margin-top: 4px;
    }

    input[type="submit"]:hover {
      background: var(--accent-hover);
      box-shadow: var(--shadow-md);
    }

    input[type="submit"]:active {
      transform: scale(0.98);
    }

    .notice {
      background: var(--surface-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: 16px 20px;
      font-size: 13px;
      color: var(--text-secondary);
      margin-top: 24px;
      line-height: 1.6;
    }

    .notice strong {
      color: var(--text-color);
      font-size: 14px;
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
    }

    /* 移动端优化 */
    @media (max-width: 600px) {
      body {
        padding: 16px;
      }

      .container {
        padding: 32px 24px;
      }

      h2 {
        font-size: 20px;
        margin-bottom: 24px;
      }

      .notice {
        padding: 14px 16px;
        font-size: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2 id="page-heading">SEGA アカウント連携</h2>
    <form method="POST">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

      <label for="segaid" id="label-segaid">セガID</label>
      <input type="text" id="segaid" name="segaid" required />

      <label for="password" id="label-password">パスワード</label>
      <input type="password" id="password" name="password" required />

      <label for="ver" id="label-version">バージョン</label>
      <select id="ver" name="ver" required>
        <option value="jp" id="opt-jp" selected>日本版「maimaidx.jp」</option>
        <option value="intl" id="opt-intl">海外版「maimaidx-eng.com」</option>
      </select>

      <input type="submit" id="submit-btn" value="連携" />
    </form>

    <div class="notice">
      <strong id="notice-title">ご利用に関するご注意</strong><br>
      <div id="notice-ja" style="display: block;">
        ご入力いただいた情報はすべて暗号化された形式で安全に保存され、第三者に提供されることはありません。<br><br>
        ただし、本サービスは個人によって運営されており、公式な保証やサポートは提供されておりません。本サービスの性質上、セキュリティや運用方針に不安がある場合は、利用をお控えいただくようお願いいたします。情報提供はあくまでご自身の判断と責任にてお願いいたします。
      </div>

      <div id="notice-en" style="display: none;">
        All information you provide will be securely stored in encrypted format and will not be shared with third parties.<br><br>
        However, this service is operated by an individual and does not provide official guarantees or support. Given the nature of this service, if you have concerns about security or operational policies, please refrain from using it. You provide information at your own judgment and responsibility.
      </div>

      <div id="notice-zh" style="display: none;">
        您输入的所有信息都将以加密形式安全保存，不会提供给第三方。<br><br>
        但是，本服务由个人运营，不提供官方保证或支持。鉴于本服务的性质，如果您对安全性或运营政策有顾虑，请勿使用。信息提供完全基于您自己的判断和责任。
      </div>
    </div>
  </div>

  <script>
    const translations = {
      ja: {
        pageTitle: 'SEGA アカウント連携 | JiETNG',
        heading: 'SEGA アカウント連携',
        labelSegaid: 'セガID',
        labelPassword: 'パスワード',
        labelVersion: 'バージョン',
        optJp: '日本版「maimaidx.jp」',
        optIntl: '海外版「maimaidx-eng.com」',
        submitBtn: '連携',
        noticeTitle: 'ご利用に関するご注意'
      },
      en: {
        pageTitle: 'SEGA Account Binding | JiETNG',
        heading: 'SEGA Account Binding',
        labelSegaid: 'SEGA ID',
        labelPassword: 'Password',
        labelVersion: 'Version',
        optJp: 'JP Version「maimaidx.jp」',
        optIntl: 'INTL Version「maimaidx-eng.com」',
        submitBtn: 'Bind',
        noticeTitle: 'Notice'
      },
      zh: {
        pageTitle: 'SEGA 账号绑定 | JiETNG',
        heading: 'SEGA 账号绑定',
        labelSegaid: '世嘉ID',
        labelPassword: '密码',
        labelVersion: '版本',
        optJp: '日本版「maimaidx.jp」',
        optIntl: '国际版「maimaidx-eng.com」',
        submitBtn: '绑定',
        noticeTitle: '使用须知'
      }
    };

    function updateLanguage(lang) {
      const t = translations[lang];

      // Update page title
      document.getElementById('page-title').textContent = t.pageTitle;

      // Update heading
      document.getElementById('page-heading').textContent = t.heading;

      // Update labels
      document.getElementById('label-segaid').textContent = t.labelSegaid;
      document.getElementById('label-password').textContent = t.labelPassword;
      document.getElementById('label-version').textContent = t.labelVersion;

      // Update version options
      document.getElementById('opt-jp').textContent = t.optJp;
      document.getElementById('opt-intl').textContent = t.optIntl;

      // Update submit button
      document.getElementById('submit-btn').value = t.submitBtn;

      // Update notice title
      document.getElementById('notice-title').textContent = t.noticeTitle;

      // Toggle notice content
      document.getElementById('notice-ja').style.display = lang === 'ja' ? 'block' : 'none';
      document.getElementById('notice-en').style.display = lang === 'en' ? 'block' : 'none';
      document.getElementById('notice-zh').style.display = lang === 'zh' ? 'block' : 'none';
    }

    // 页面加载时自动设置用户语言
    window.addEventListener('DOMContentLoaded', function() {
      const userLanguage = '{{ user_language }}' || 'ja';
      updateLanguage(userLanguage);
    });
  </script>
</body>
</html>
